%h1 User Profile
%h2 Personal Data:
%p
  %strong User name: 
  = @user.username
  %br
  %strong Full name: 
  = @user.fullname

%p
  %strong Email: 
  = @user.email

%h2 Type of Account:
= @user.rights

%h2 Create a new message:
= form_with model: [ @user, @user.messages.build ], local: true do |f|
  %p
    %strong
      = f.label :body
      %br
      = f.text_area :body
  %p
    = f.submit

%h2 Message History:
%table
  %tr
    %th Date
    %th Body
    %th
    %th

  - @messages.all.each do |message|
    %tr
      %td= message.created_at
      %td= message.body
      %td= link_to 'Edit',  edit_user_message_path(@user, message)
      %td= link_to 'Hide', hide_user_message_path(@user, message), 
        method: :patch,
        data: {confirm: 'Are you sure you want to delete your message?',
        class: 'btn btn-danger'}

%br
= link_to 'Edit', edit_user_path
= link_to 'Back', welcome_index_path
= link_to 'Deactivate account', deactivate_user_path(@user),
  method: :patch,
  data: {confirm: 'Are you sure you want to deactivate your account?',
  class: 'btn btn-danger'}
